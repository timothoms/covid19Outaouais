---
title: "Covid19 Situation in Outaouais Schools"
params: 
  optimize: true
---

```{r setup, include=FALSE}
source("_R/setup.R")
source("_R/functions_figures.R")
```

```{r data}
load("_data/schools.RData")
# tapply(schools$school, schools$admin, function(x) length(unique(x)))
# table(schools[, c("note", "color_code")])
# unique(schools$school)
# unique(schools$school[nchar(schools$school) > quantile(nchar(schools$school), probs = seq(0, 1, 0.05)[20])])
schools$school <- str_replace(schools$school, 
  "École Cité Étudiante de la Haute-Gatineau", 
  "École Cité Étudiante\nde la Haute-Gatineau")
schools$school <- str_replace(schools$school, 
  "Centre d'éducation des adultes Portages-de-l'Outaouais", 
  "Centre d'éducation des adultes")
# schools$school <- str_replace(schools$school, 
  # "École Cœur de la Gatineau, pavillon St-Nom-de-Marie", 
  # "École Cœur de la Gatineau, pavillon St-Nom-de-Marie")
schools$school <- str_replace(schools$school, 
  "Centre d'éducation des Adultes, programme FIS maison amitié de Maniwaki", 
  "Centre d'éducation des Adultes,\nprogramme FIS maison\namitié de Maniwaki")
schools$school <- str_replace(schools$school, "École", "É.")
schools$school <- str_replace(schools$school, "école", "É.")
schools$school <- str_replace(schools$school, "School", "S.")
schools$school <- str_replace(schools$school, "Shcool", "S.")
schools$school <- str_replace(schools$school, "Education", "Ed.")
schools$school <- str_replace(schools$school, "Éducation", "Éd.")
schools$school <- str_replace(schools$school, "éducation", "Éd.")
schools$school <- str_replace(schools$school, 
                              "Centre de formation professionnelle des métiers", 
                              "CFP")
schools$school <- str_replace(schools$school, 
                              "Centre de formation professionnelle", 
                              "CFP")
schools$school <- str_replace(schools$school, "Centre", "C.")
schools$school <- str_replace(schools$school, " de l'Outaouais", "\nde l'Outaouais")
schools$school <- str_replace(schools$school, "Collège ", "Collège\n")
schools$school <- str_replace(schools$school, ", pavillon ", ", ")
schools$school <- str_replace(schools$school, 
                              "Service régional de la formation professionnelle et du service aux entreprises Réseautact", 
                              "SRFP Réseautact")
board <- "Centre de services scolaire des Hauts-Bois-de-l'Outaouais"
schools$school[schools$admin == board] <- 
  str_replace(schools$school[schools$admin == board], fixed(", "), ",\n")
schools$school <- str_replace(schools$school, fixed(" ("), "\n(")
schools$school <- str_trim(schools$school)
# unique(schools$school[str_detect(schools$school, "blah")])
schools <- schools %>% arrange(admin, schools, date)
```

```{r, child = "_md/schools_intro.md"}
```

# Schools with confirmed cases {.tabset .tabset-fade .tabset-pills}

## CSS des Draveurs
```{r draveurs}
SchoolsFig(c("Centre de services scolaire des Draveurs"))
```

## CSS des Portages-de-l'Outaouais
```{r portages}
SchoolsFig(c("Centre de services scolaire des Portages-de-l'Outaouais"))
```

## Western Québec School Board
```{r anglo}
SchoolsFig(c("Commission scolaire Western Québec"))
```

## CSS au Cœur-des-Vallées
```{r vallees}
SchoolsFig(c("Centre de services scolaire au Cœur-des-Vallées"))
```

## CSS des Hauts-Bois-de-l'Outaouais
```{r hauts_bois}
SchoolsFig(c("Centre de services scolaire des Hauts-Bois-de-l'Outaouais"))
```

## École privée
```{r privee}
SchoolsFig(c("École privée"))
```

# Information on this site {.tabset .tabset-pills}

```{r, child = "_md/schools_notes.md"}
```

```{r, child = "_md/updates.md"}
```

Last data update: `r str_replace(read_file("_data/data_update_time.txt"), "\n", "")`

Last page update: `r now()`

```{r, child = "_md/disclaimer.md"}
```

```{r, child = "_md/footer.md"}
```
