---
title: "Cumulative cases by municipalities"
params: 
  optimize: true
---

```{r setup, include=FALSE}
source("_R/setup.R")
source("_R/figures_theme.R")
source("_R/CovidFig.R")
load("_data/cisss.RData")
load("_data/cisss_daily.RData")
load("_data/municipalities.RData")
```

## {.tabset .tabset-fade .tabset-pills}

### Collines
```{r areas_collines}
condition <- municipalities$mrc == "Les Collines-de-l'Outaouais"
towns <- municipalities$municipality[condition]
cisss %>% 
  filter(table %in% c("areas", "rls")) %>% 
  filter(key %in% towns) %>% 
  CovidFig(rug = TRUE)
```

### Papineau
```{r areas_papineau}
towns <- c("Thurso", "Papineauville", "Saint-André-Avellin", "Chénéville","Ripon", "Montebello")
cisss %>% 
  filter(table %in% c("areas", "rls")) %>% 
  filter(key %in% towns) %>% 
  CovidFig(rug = TRUE)
```
### Papineau (<25)
```{r areas_papineau_cont}
condition <- municipalities$mrc == "Papineau" & !municipalities$municipality %in% towns
towns <- municipalities$municipality[condition]
cisss %>% 
  filter(table %in% c("areas", "rls")) %>% 
  filter(key %in% towns) %>% 
  CovidFig(rug = TRUE)
```

### Vallée
```{r areas_vallee}
exclude <- c("Messines", "Déléage", "Bouchette")
condition <- municipalities$mrc == "La Vallée-de-la-Gatineau" & municipalities$designation == "Ville"
towns <- c(municipalities$municipality[condition], exclude)
cisss %>% filter(table %in% c("areas", "rls")) %>% 
  filter(key %in% towns) %>% 
  CovidFig(rug = TRUE)
```

### Vallée (<25)
```{r areas_vallee_cont}
condition <- municipalities$mrc == "La Vallée-de-la-Gatineau" & municipalities$designation != "Ville" & !municipalities$municipality %in% exclude
towns <- municipalities$municipality[condition]
cisss %>% filter(table %in% c("areas", "rls")) %>% 
  filter(key %in% towns) %>% 
  CovidFig(rug = TRUE)
```

### Pontiac
```{r areas_pontiac}
towns <- municipalities$municipality[municipalities$mrc == "Pontiac"]
cisss %>% filter(table %in% c("areas", "rls")) %>% 
  filter(key %in% towns)  %>% 
  CovidFig(rug = TRUE)
```

### Total & Gatineau
```{r areas_gatineau}
towns <- c("Gatineau", "Total cases (municipalities)")
cisss %>% filter(table %in% c("areas", "rls")) %>% 
  filter(key %in% towns) %>% 
  CovidFig(rug = TRUE)
```

##

Last data update: `r str_replace(read_file("_data/data_update_time.txt"), "\n", "")`
