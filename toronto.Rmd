---
title: "Covid19 Situation in Toronto"
output:
  html_document:
    theme: darkly
params: 
  optimize: false
---

```{r setup, include=FALSE}
library(tidyverse)
library(lubridate)
knitr::knit_hooks$set(optipng = knitr::hook_optipng)
knitr::knit_hooks$set(pngquant = knitr::hook_pngquant)
knitr::opts_chunk$set(echo = FALSE, cache = FALSE, 
                      results = 'hide', warning = FALSE)
knitr::opts_chunk$set(dpi = 120, fig.width = 7, fig.height = 5, 
                      out.width = "100%", out.height = "100%")
if(params$optimize) knitr::opts_chunk$set(optipng = '-o7')
Sys.setlocale(category = "LC_ALL", locale = "en_CA.UTF-8")
options(scipen = 100000)
load("data/covid_local.RData")
load("data/covid_local_daily.RData")
source("functions_figures.R")
```

## {.tabset .tabset-fade .tabset-pills}

### Average increase per day (over 7 days)
```{r opencovid_avg}
DailyFig(keys = c("Average increase per day (Toronto)"),
         tab = "opencovid.ca", 
         rug = FALSE, 
         caption = "Data source: opencovid.ca/api/")
```

### Cumulative cases
```{r opencovid_total}
LocalFig(keys = c("Total cases (Toronto)"),
         tab = "opencovid.ca",
         rug = FALSE, 
         caption = "Data source: opencovid.ca/api/")
```

### Deaths
```{r opencovid_deaths}
LocalFig(keys = c("Total deaths (Toronto)"),
         tab = "opencovid.ca",
         rug = FALSE, 
         caption = "Data source: opencovid.ca/api/")
```

##
```{r, child = 'content/updates.md', eval = FALSE}
```

Last page update: `r now()`

```{r, child = 'content/footer.md'}
```
